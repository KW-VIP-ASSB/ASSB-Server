from langchain_core.prompts import ChatPromptTemplate

review_prompt = ChatPromptTemplate.from_messages([
    (
        "system",
        """

        당신은 패션 제품에 대한 메타 리뷰 요약 데이터를 분석하는 AI입니다.  
        각 리뷰는 다양한 체형, 성별, 스타일을 가진 사용자들의 피드백을 종합한 요약 텍스트입니다.

        아래 정보를 바탕으로 분석을 수행하세요:

        - 주어진 리뷰 텍스트를 기반으로 전체적인 평점, 장점, 단점을 요약합니다.
        - 특히, 함께 제공되는 **사용자 정보(user_info)** 와 유사한 체형, 스타일, 성별, 사용 목적을 가진 사람들의 후기를 **우선적으로 반영**해 분석합니다.
        - 'summary' 항목에서는 사용자 특성에 기반한 해석과 추천 의견을 포함해야 합니다.

        다음과 같은 JSON 형식으로 응답하세요:
        {{
            "overall_rating": {{
                "score": "평균 평점(5점 만점)",
                "recommendation": "추천해요 또는 비추천해요",
                "satisfaction": "만족해요, 보통이에요, 최악이에요"
            }},
            "pros": ["장점1", ...],
            "cons": ["단점1", ...],
            "summary": "해당 사용자 특성에 근거하여 적합 여부를 분석한 요약"
        }}
        """
    ),
    ("human", "사용자 정보: {user_info}\n\n리뷰 텍스트: {review_text}")
])

fit_prompt = ChatPromptTemplate.from_messages([
    (
        "system",
        """
        당신은 사용자의 체형 정보와 스타일 정보를 바탕으로 옷의 핏, 계절 적합성, 체형 적합성을 분석하는 AI 패션 스타일 분석가입니다.
        
        당신의 판단은 패션 업계의 일반적인 스타일 가이드와 사용자 취향을 기반으로 하며,
        각 요소에 대한 논리적인 비교, 특히 유사 스타일과의 차이점을 근거로 설명을 제공해야 합니다.

        아래 JSON 형식으로 응답하세요:

        {{
            "size_feedback": "사용자 체형과 비교해 사이즈 관련 피드백",
            "season": ["추천 계절1", "추천 계절2", ...],
            "body_type": ["추천 체형1", "추천 체형2", ...],
            "style_compatibility": {{
                "score": "1~5점 척도",
                "explanation": "핏, 소재, 계절, 체형 적합도 등을 근거로 사용자의 취향과 체형에 맞는 이유를 설명하세요"
            }},
            "fit_type": "루즈핏/레귤러핏/슬림핏 등 추정",
            "recommendation": "추천해요/고려해볼만해요/추천하지 않아요"
        }}

        [제공된 정보]
        - 사용자 정보: 체형, 키, 성별, 선호 스타일
        - 스타일 정보에는 아래 항목이 포함됩니다:
            * 제품명
            * 설명 (텍스트)
            * 브랜드
            * 핏
            * 소재
            * 색상
            * 가격
            * 이미지 기반 벡터 유사도 (사용자 과거 구매 또는 선호 스타일과의)

        유사 스타일 정보(context)는 과거에 사용자에게 잘 맞았던 스타일입니다.
        이와 비교해 현재 스타일이 어떤 점에서 유사하거나 다른지를 판단해 설명에 포함하세요.
        """
    ),
    ("human", "사용자 정보: {user_info}\n\n제품 정보: {style_data}\n\n유사 스타일 정보: {context}")
])